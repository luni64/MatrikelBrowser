<mah:MetroWindow x:Class="MatrikelBrowser.MainWindow"
                 xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                 xmlns:Behaviours="http://metro.mahapps.com/winfx/xaml/shared"
                 xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"             
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:vm="clr-namespace:MatrikelBrowser.ViewModels"
                 xmlns:view="clr-namespace:MatrikelBrowser"              
                 Closing="MetroWindow_Closing"  
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type={x:Type vm:MainViewModel}}"                                                   
                 Title="Matrikel Browser" Height="900" Width="1440">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <view:BookTypeToIconConverter x:Key="BookType2IconConverter"/>
        <view:StringToImageConverter x:Key="StringToImageConverter"/>
        <view:StringToImageConverter x:Key="valueconverter"/>
    </Window.Resources>

    <!--<mah:MetroWindow.LeftWindowCommands>
        <mah:WindowCommands>
            <Button Click="SaveButton_Click" >
                <Button.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconModern 
                                Width="16"
                                Height="16"
                                VerticalAlignment="Center"
                                Kind="Save" />
                            <TextBlock 
                                Margin="4 0 0 0"
                                VerticalAlignment="Center"
                                Text="Save" />
                        </StackPanel>
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>
        </mah:WindowCommands>
    </mah:MetroWindow.LeftWindowCommands>-->

    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands>
            <Button Command="{Binding cmdSettings}" >
                <Button.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconForkAwesome  
                                Width="16"
                                Height="16"
                                VerticalAlignment="Center"
                                Kind="Bars" />
                            <TextBlock 
                            Margin="8 0 0 0"
                            VerticalAlignment="Center"
                            Text="Einstellungen" />
                        </StackPanel>
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>
        </mah:WindowCommands>
    </mah:MetroWindow.RightWindowCommands>

    <!--<mah:MetroWindow.Flyouts>
        <mah:FlyoutsControl x:Name="flyoutsControl">
            <mah:Flyout 
                x:Name="FirstFlyout"                
                Margin="0 30 0 0"
                Width="350"
                AreAnimationsEnabled="True"
                AnimateOpacity="True"                      
                IsOpen="False"
                Header="Kirchenbücher"
                Position="Right"
                Theme="Inverse"
             >
                <Border BorderBrush="Transparent" BorderThickness="3 0 0 0">
                    <view:Tectonics Margin="3" DataContext="{Binding tectonicsVM}"/>
                </Border>
            </mah:Flyout>

            <mah:Flyout 
                x:Name="NotesFlyout"
                DataContext="{Binding tectonicsVM.selectedBook}"
                Header="{Binding Title}"
                Width="350" Margin="0,30,0,0" Position="Left"                     
                Theme="Inverse"
                AreAnimationsEnabled="True"
                AnimateOpacity="True">
                <view:NotesFlyout/>
            </mah:Flyout>
        </mah:FlyoutsControl>
    </mah:MetroWindow.Flyouts>-->

    <Grid 
        x:Name="grid" 
        DataContext="{Binding tectonicsVM}"  
        d:DataContext="{d:DesignInstance Type={x:Type vm:TectonicsVM}}" 
        Margin="5,5,0,0">

        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="0"/>
        </Grid.RowDefinitions>
        <!--<Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="450" MinWidth="0"/>
        </Grid.ColumnDefinitions>-->

        <Grid x:Name="grid2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="450"/>
            </Grid.ColumnDefinitions>
            <view:BooksTabControl Grid.Column="0" Margin="-0,0,-25,-25" />
            <view:HalfCircleButton x:Name="TecButton"  Grid.Column="1" VerticalAlignment="Top"  Click="Button_Click" Focusable="False" ToolTip="Ein/Ausklappen der Kirchenbuchliste" ToolTipService.InitialShowDelay="100"/>
            <view:Tectonics  Grid.Column="2" Margin="-0,0,0,-25" Grid.RowSpan="2" />
        </Grid>
        <view:HalfCircleButton x:Name="NotesButton"  Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" HorizontalAlignment="Center" Click="Button_Click_1" ToolTip="Ein/Ausklappen der Notizenleiste" ToolTipService.InitialShowDelay="100" Focusable="False" ButtonContent="N" RenderTransformOrigin="0.5,0.5">
            <view:HalfCircleButton.LayoutTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform Angle="90"/>
                    <TranslateTransform/>
                </TransformGroup>
            </view:HalfCircleButton.LayoutTransform>
        </view:HalfCircleButton>
        <view:NotesFlyout Grid.Row="2" Grid.ColumnSpan="4" DataContext="{Binding selectedTab.book }" />

        <!--<view:NotesFlyout Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2" Margin="0,0,5,0" DataContext="{Binding selectedBook}"/>-->

        <!--<Border Grid.Row="2" Grid.ColumnSpan="3" Background="#000000" CornerRadius="15" Margin="0,0,-25,0"/>-->


        <Button  ToolTip="Leesezeichen und Notizen"
          Click="Button_Click_1"
          Background="#7FFFFFFF"
          Width="42" Height="42"  Margin="20,100,0,0" VerticalAlignment="Top" HorizontalAlignment="Left"                       
          ToolTipService.InitialShowDelay="200"
          Style="{DynamicResource MahApps.Styles.Button.Circle}">
            <iconPacks:PackIconVaadinIcons Width="20" Height="20" Kind="Edit" />
        </Button>

    </Grid>
</mah:MetroWindow>

